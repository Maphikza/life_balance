<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Relationships</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <link href="{{url_for('static', filename='css/styles.css')}}" rel="stylesheet">
</head>

<body>
  <div class="container-fluid bg-dark">
    <nav class="navbar navbar-expand-md navbar-dark bg-dark" aria-label="goals navbar">
      <div class="container-fluid">
        <a class="navbar-brand" href="{{url_for('home')}}">Home</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarConnect"
          aria-controls="navbarConnect" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarConnect">
          <ul class="navbar-nav me-auto mb-2 mb-md-0">
            <li class="nav-item">
              <a class="nav-link" href="{{url_for('goals')}}">Goals</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="{{url_for('connections')}}">Connections</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{url_for('finance')}}">Finance</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{url_for('bucket_list')}}">Bucket List</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{url_for('logout')}}">Logout</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </div>
  <div class="container button-container">
    <div class="position-relative overflow-hidden p-3 p-md-2 m-md-2 text-center bg-light">
      <div class="col-md-9 p-lg-5 mx-auto my-5">
        <h1 class="display-4 fw-normal">Relationships</h1>
        <p class="lead fw-normal">The people we choose to spend our lives with can have a profound impact on our
          happiness and well-being. In this section, we invite you to reflect on the people who are closest to your
          heart and consider what they mean to you. We believe that connections with others are essential to our overall
          sense of well-being. The relationships you cultivate should be ones that truly matter to you, and this
          exercise can help you appreciate the good people in your life or identify areas where you may want to invest
          more time and effort. Having family and friends who love you for who you are is a precious gift, and it's
          important to consider how you can nurture these relationships over time.
        </p>
        <a type="submit" class="btn btn-dark btn-lg m-1" href="{{url_for('add_connections')}}">Add Relationship</a>
      </div>
    </div>
    <div class="row align-items-md-stretch">
      {% for connection in user_connections %}
      <div class="col-md-6">
        <div class="h-100 p-5 bg-light border rounded-3">
          <h2>{{d_func(connection.name)}} | {{d_func(connection.relationship_to_user)}}</h2><br>
          <p>{{d_func(connection.relationship_thoughts)}}</p>
          <a type="submit" class="btn btn-outline-dark btn-sm m-1"
            href="{{url_for('connections_edit', connect_id=connection.id)}}">Edit</a>
          <a type="submit" class="btn btn-outline-dark btn-sm m-1 ai-button" data-connect-id="{{ connection.id }}"
            href="{{url_for('connections_ai_enhance_edit', connect_id=connection.id)}}">AI Enhance</a>
          <a type="submit" class="btn btn-outline-dark btn-sm m-1"
            href="{{url_for('delete_connection', connect_id=connection.id)}}">Delete</a>
          <div class="d-flex align-items-center mt-3">
            <strong id="spinner1_{{ connection.id }}" style="display: none;">Generating edit...</strong>
            <div class="spinner-border ms-auto" role="status" aria-hidden="true" id="spinner_{{ connection.id }}"
              style="display: none;"></div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  <div class="container footer-container">
    <footer class="footer mt-auto py-3 my-4 pt-5">
      <p>&copy; <span id="year"></span> Life Balance, Inc</p>
    </footer>
  </div>
  <script>
    document.getElementById("year").innerHTML = new Date().getFullYear();

    document.querySelectorAll(".ai-button").forEach(function (element) {
      element.addEventListener("click", function () {
        var spinnerId = "spinner_" + this.dataset.connectId;
        var spinner1Id = "spinner1_" + this.dataset.connectId;
        document.getElementById(spinner1Id).style.display = "block";
        document.getElementById(spinnerId).style.display = "block";
        this.disabled = true;
      });
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
</body>

</html>